[gd_scene load_steps=27 format=3 uid="uid://byq4xr05fobc6"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_u06oi"]
[ext_resource type="PackedScene" uid="uid://cod6roj0bv5r6" path="res://assets/blenderMeshes/submarine/game_ready.glb" id="2_rwhm1"]
[ext_resource type="PackedScene" uid="uid://du6vm3dxivlih" path="res://scenes/player.tscn" id="3_gtoj2"]
[ext_resource type="PackedScene" uid="uid://dfb3njnkc5abr" path="res://assets/blenderMeshes/display/display.glb" id="4_q7jy6"]
[ext_resource type="PackedScene" uid="uid://tj2a8hn60yt3" path="res://scenes/ui/sonar.tscn" id="5_ixbvl"]
[ext_resource type="PackedScene" uid="uid://dj46rqiyroyn2" path="res://_utests_and_debug_instruments/test_scenes/virtual_movement_tests/vmap_maping.tscn" id="6_y2b06"]
[ext_resource type="PackedScene" uid="uid://qbx5cmhsh6nn" path="res://scenes/ui/player_info.tscn" id="7_rttnv"]
[ext_resource type="Script" path="res://_utests_and_debug_instruments/test_scenes/test_game_day2/turn_left.gd" id="8_2jeib"]
[ext_resource type="Script" path="res://scenes/interactive/interactable.gd" id="9_bjx65"]
[ext_resource type="Script" path="res://_utests_and_debug_instruments/test_scenes/test_game_day2/turn_right.gd" id="10_5wqmn"]
[ext_resource type="Script" path="res://_utests_and_debug_instruments/test_scenes/test_game_day2/move_forward.gd" id="11_kbn0p"]
[ext_resource type="PackedScene" uid="uid://duqo6j0k20vgv" path="res://scenes/screens_periscope/screen.tscn" id="12_pynd7"]
[ext_resource type="PackedScene" uid="uid://cll5522o2q2tj" path="res://scenes/peripherals_dynamic_scenes/finish_sound_sonar.tscn" id="13_3vohr"]
[ext_resource type="PackedScene" uid="uid://dp30jmwnmok6n" path="res://scenes/virtual/virtual_environment.tscn" id="14_dkpjl"]
[ext_resource type="Resource" uid="uid://jjitux2t22gi" path="res://godot_resources/vmap_levels/level_y.tres" id="15_jxyv7"]
[ext_resource type="Script" path="res://godot_resources/virtual_player.gd" id="16_n1aej"]
[ext_resource type="Script" path="res://godot_resources/virtual_enemies/virtual_enemy.gd" id="17_fb5hj"]

[sub_resource type="ViewportTexture" id="ViewportTexture_hrpk1"]
viewport_path = NodePath("CanvasLayer/SubViewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_doo6f"]
viewport_path = NodePath("CanvasLayer/SubViewport2")

[sub_resource type="CylinderMesh" id="CylinderMesh_t2yg0"]
height = 1.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_8e76n"]
height = 1.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_yjlv0"]
height = 1.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_5l1jm"]
height = 1.0

[sub_resource type="Resource" id="Resource_n4sjp"]
resource_local_to_scene = true
script = ExtResource("16_n1aej")
hp = 2
air = 10
torpedos = 2
air_refill_amount = 2
damage_from_rocks = 1
damage_from_destructables = 1
damage_from_enemies = 2
after_burner = 2

[sub_resource type="Resource" id="Resource_pbrj0"]
script = ExtResource("17_fb5hj")
ai_type = 0
start_ping_pong_direction = 0
matrix_movement = -1

[sub_resource type="Resource" id="Resource_wjhcs"]
script = ExtResource("17_fb5hj")
ai_type = 0
start_ping_pong_direction = 0
matrix_movement = -1

[node name="Game" type="Node3D"]
script = ExtResource("1_u06oi")

[node name="Submarine" parent="." instance=ExtResource("2_rwhm1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.430676, 0, -0.443177)

[node name="Basic FPS Player" parent="." instance=ExtResource("3_gtoj2")]
transform = Transform3D(0.8, 0, 0, 0, 0.8, 0, 0, 0, 0.8, 0, 0.466176, 18.3056)

[node name="Light" type="Node" parent="."]

[node name="OmniLight3D" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 1.44221, 8.79808)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D2" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 1.44221, -1.1802)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D3" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 1.44221, -5.03694)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D4" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 1.44221, -9.09487)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D5" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 4.08178, -10.1185)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D6" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0696674, 4.08178, 1.67053)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D7" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.43856, 4.08178, 7.96696)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D8" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, 10.8103)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D9" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, 19.7874)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D10" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, 26.5765)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D11" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, 0.983164)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D12" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, -6.45891)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D13" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 6.58822, -13.9296)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D14" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.28258, 2.51383, 19.2392)
light_color = Color(1, 0.346577, 0.280009, 1)
light_energy = 0.5

[node name="OmniLight3D15" type="OmniLight3D" parent="Light"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.184712, 6.56562, 33.8429)
light_energy = 2.0

[node name="DisplayFirstEvent" parent="." instance=ExtResource("4_q7jy6")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 11.4107, -0.765556, 17.7538)

[node name="terminal" parent="DisplayFirstEvent" index="0"]
transform = Transform3D(-2.38419e-07, 0.00239546, -0.999997, 3.49246e-10, 0.999997, 0.00239546, 1, 3.49246e-10, -2.38419e-07, -11.7581, 2.66617, 1.61941)

[node name="DisplaySecondEvent" parent="." instance=ExtResource("4_q7jy6")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -2.16048, 3.56516, -27.8923)

[node name="terminal" parent="DisplaySecondEvent" index="0"]
transform = Transform3D(-2.38419e-07, 0.00239546, -0.999997, 3.49246e-10, 0.999997, 0.00239546, 1, 3.49246e-10, -2.38419e-07, -11.7581, 2.66617, 1.61941)

[node name="DisplayThirdEvent" parent="." instance=ExtResource("4_q7jy6")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -2.16048, -0.98206, 3.79957)

[node name="terminal" parent="DisplayThirdEvent" index="0"]
transform = Transform3D(-2.38419e-07, 0.00239546, -0.999997, 3.49246e-10, 0.999997, 0.00239546, 1, 3.49246e-10, -2.38419e-07, -11.7581, 2.66617, 1.61941)

[node name="Node" type="Node" parent="."]

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(-0.157727, 0, 0.118705, 0, 0.197405, 0, -0.118705, 0, -0.157727, -1.35361, 5.48651, 35.7207)
texture = SubResource("ViewportTexture_hrpk1")

[node name="Sprite3D2" type="Sprite3D" parent="."]
transform = Transform3D(0.162821, 0, 0.111615, 0, 0.197405, 0, -0.111615, 0, 0.162821, -0.775137, 5.48651, 31.5559)
texture = SubResource("ViewportTexture_doo6f")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="SubViewport" type="SubViewport" parent="CanvasLayer"]
disable_3d = true
transparent_bg = true

[node name="Sonar" parent="CanvasLayer/SubViewport" instance=ExtResource("5_ixbvl")]

[node name="VmapMaping" parent="CanvasLayer" instance=ExtResource("6_y2b06")]

[node name="SubViewport2" type="SubViewport" parent="CanvasLayer"]
disable_3d = true
transparent_bg = true
size = Vector2i(1075, 610)
size_2d_override_stretch = true

[node name="PlayerInfo" parent="CanvasLayer/SubViewport2" instance=ExtResource("7_rttnv")]

[node name="TurnLeft" type="Node3D" parent="."]
transform = Transform3D(0.0801847, 0, 0.180386, 0, 0.197405, 0, -0.180386, 0, 0.0801847, -0.468535, 5.24884, 34.5412)
script = ExtResource("8_2jeib")

[node name="TurnLeftMesh" type="MeshInstance3D" parent="TurnLeft"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, -0.4, 0)
mesh = SubResource("CylinderMesh_t2yg0")
skeleton = NodePath("../../Screen")

[node name="Interactable" type="Area3D" parent="TurnLeft" groups=["turn_left_interactable"]]
collision_layer = 4
collision_mask = 0
script = ExtResource("9_bjx65")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TurnLeft/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)
shape = SubResource("CylinderShape3D_8e76n")

[node name="TurnRight" type="Node3D" parent="."]
transform = Transform3D(0.0801847, 0, 0.180386, 0, 0.197405, 0, -0.180386, 0, 0.0801847, -0.342704, 5.24884, 33.009)
script = ExtResource("10_5wqmn")

[node name="TurnRightMesh" type="MeshInstance3D" parent="TurnRight"]
transform = Transform3D(1, 0, 5.96046e-08, 0, 1, 0, -5.96046e-08, 0, 1, 0, -0.4, 0)
mesh = SubResource("CylinderMesh_t2yg0")
skeleton = NodePath("../../Screen")

[node name="Interactable" type="Area3D" parent="TurnRight" groups=["turn_right_interactable"]]
collision_layer = 4
collision_mask = 0
script = ExtResource("9_bjx65")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TurnRight/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)
shape = SubResource("CylinderShape3D_yjlv0")

[node name="MoveForward" type="Node3D" parent="."]
transform = Transform3D(0.0801847, 0, 0.180386, 0, 0.197405, 0, -0.180386, 0, 0.0801847, -0.222754, 5.24884, 33.8123)
script = ExtResource("11_kbn0p")

[node name="MoveForwardMesh" type="MeshInstance3D" parent="MoveForward"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, -0.4, 0)
mesh = SubResource("CylinderMesh_t2yg0")
skeleton = NodePath("../../Screen")

[node name="Interactable" type="Area3D" parent="MoveForward" groups=["move_forward_interactable"]]
collision_layer = 4
collision_mask = 0
script = ExtResource("9_bjx65")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MoveForward/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)
shape = SubResource("CylinderShape3D_5l1jm")

[node name="Screen2" parent="." instance=ExtResource("12_pynd7")]

[node name="Screen" parent="." instance=ExtResource("12_pynd7")]

[node name="FinishSoundSonar" parent="." instance=ExtResource("13_3vohr")]
transform = Transform3D(2.35403e-09, 0, 0.197405, 0, 0.197405, 0, -0.197405, 0, 2.35403e-09, -1.97229, 5.16775, 33.4346)

[node name="VirtualMap" parent="." instance=ExtResource("14_dkpjl")]
vmap = ExtResource("15_jxyv7")
_player = SubResource("Resource_n4sjp")
_virtual_enemies = Array[ExtResource("17_fb5hj")]([SubResource("Resource_pbrj0"), SubResource("Resource_wjhcs")])

[connection signal="focused" from="TurnLeft/Interactable" to="TurnLeft" method="_on_interactable_focused"]
[connection signal="interacted" from="TurnLeft/Interactable" to="TurnLeft" method="_on_interactable_interacted"]
[connection signal="unfocused" from="TurnLeft/Interactable" to="TurnLeft" method="_on_interactable_unfocused"]
[connection signal="focused" from="TurnRight/Interactable" to="TurnRight" method="_on_interactable_focused"]
[connection signal="interacted" from="TurnRight/Interactable" to="TurnRight" method="_on_interactable_interacted"]
[connection signal="unfocused" from="TurnRight/Interactable" to="TurnRight" method="_on_interactable_unfocused"]
[connection signal="focused" from="MoveForward/Interactable" to="MoveForward" method="_on_interactable_focused"]
[connection signal="interacted" from="MoveForward/Interactable" to="MoveForward" method="_on_interactable_interacted"]
[connection signal="unfocused" from="MoveForward/Interactable" to="MoveForward" method="_on_interactable_unfocused"]

[editable path="DisplayFirstEvent"]
[editable path="DisplaySecondEvent"]
[editable path="DisplayThirdEvent"]
